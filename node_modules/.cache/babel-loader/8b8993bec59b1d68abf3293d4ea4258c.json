{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/gonzalofernan/dev/challenge/components/Products.js\";\nimport React, { Component } from 'react';\nimport Header from '../components/Header';\nimport Link from 'next/link';\n\nvar Products =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Products, _Component);\n\n  function Products(props) {\n    var _this;\n\n    _classCallCheck(this, Products);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Products).call(this, props));\n    _this.sortMostRecent = _this.sortMostRecent.bind(_assertThisInitialized(_this));\n    _this.sortLowestCost = _this.sortLowestCost.bind(_assertThisInitialized(_this));\n    _this.sortHighestCost = _this.sortHighestCost.bind(_assertThisInitialized(_this));\n    _this.state = {\n      isTop: true,\n      loading: true,\n      isLowestPrice: false,\n      isHigherPrice: false,\n      isProductsOriginal: false,\n      'products': []\n    };\n    return _this;\n  }\n\n  _createClass(Products, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var response, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch('https://coding-challenge-api.aerolab.co/products', {\n                  headers: new Headers({\n                    Authorization: \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZDFkMmY4NzM2ZjEyNTAwNmZmOWIzZTAiLCJpYXQiOjE1NjIxOTM3OTl9.QaUDZ3qJA5FMwz0ThhGWoIxJ8pFpZv9I00XZM40PORc\"\n                  })\n                });\n\n              case 2:\n                response = _context.sent;\n                _context.next = 5;\n                return response.json();\n\n              case 5:\n                data = _context.sent;\n                this.setState({\n                  'products': data,\n                  loading: false\n                }); // Detect when scrolled through banner\n\n                document.addEventListener('scroll', function () {\n                  var isTop = window.scrollY < 400;\n\n                  if (isTop !== _this2.state.isTop) {\n                    _this2.setState({\n                      isTop: isTop\n                    });\n                  }\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"sortMostRecent\",\n    //Sort products from most recent creation date\n    value: function sortMostRecent() {\n      var products = this.state.products;\n      var newProducts = products;\n\n      if (!this.state.isLowestPrice) {\n        newProducts = products.sort(function (a, b) {\n          return a._id.localeCompare(b._id);\n        });\n      }\n\n      this.setState({\n        products: newProducts\n      });\n      console.log(products);\n    }\n  }, {\n    key: \"sortLowestCost\",\n    //Sort products from lowest cost to highest\n    value: function sortLowestCost() {\n      var products = this.state.products;\n      var newProducts = products;\n\n      if (!this.state.isLowestPrice) {\n        newProducts = products.sort(function (a, b) {\n          return a.cost - b.cost;\n        });\n      }\n\n      this.setState({\n        products: newProducts\n      });\n      console.log(products);\n    }\n  }, {\n    key: \"sortHighestCost\",\n    //Sort products from highest cost to lowest\n    value: function sortHighestCost() {\n      var products = this.state.products;\n      var newProducts = products;\n\n      if (!this.state.isLowestPrice) {\n        newProducts = products.sort(function (a, b) {\n          return b.cost - a.cost;\n        });\n      }\n\n      this.setState({\n        products: newProducts\n      });\n      console.log(products);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      //Redeem\n      var points = this.props.points;\n\n      function redeem(value) {\n        if (points > value) {\n          points = points - value;\n        }\n      }\n\n      return React.createElement(\"div\", {\n        style: \"position :relative;\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sortbar\" + ' ' + (this.state.isTop ? 'normal' : 'fixed'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sortbar__title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Sort by:\"), React.createElement(\"div\", {\n        className: \"sortbar__buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: this.sortMostRecent,\n        className: \"sortbar__buttons__button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Most recent\"), React.createElement(\"div\", {\n        onClick: this.sortLowestCost,\n        className: \"sortbar__buttons__button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Lowest price\"), React.createElement(\"div\", {\n        onClick: this.sortHighestCost,\n        className: \"sortbar__buttons__button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Highest price\"))), React.createElement(\"div\", {\n        className: \"grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, this.state.products.map(function (item, index) {\n        var _this3 = this;\n\n        if (item.cost <= points) {\n          return React.createElement(\"div\", {\n            className: \"grid__item\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 100\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"grid__item__overlay\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 101\n            },\n            __self: this\n          }, React.createElement(\"svg\", {\n            width: \"42px\",\n            height: \"42px\",\n            viewBox: \"0 0 42 42\",\n            version: \"1.1\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 102\n            },\n            __self: this\n          }, React.createElement(\"defs\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103\n            },\n            __self: this\n          }, React.createElement(\"radialGradient\", {\n            cx: \"50%\",\n            cy: \"50.8764901%\",\n            fx: \"50%\",\n            fy: \"50.8764901%\",\n            r: \"79.8469947%\",\n            id: \"radialGradient-1\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 104\n            },\n            __self: this\n          }, React.createElement(\"stop\", {\n            \"stop-color\": \"#0AD4FA\",\n            offset: \"0%\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 105\n            },\n            __self: this\n          }), React.createElement(\"stop\", {\n            \"stop-color\": \"#25BBF1\",\n            offset: \"100%\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106\n            },\n            __self: this\n          }))), React.createElement(\"g\", {\n            id: \"Catalog\",\n            stroke: \"none\",\n            \"stroke-width\": \"1\",\n            fill: \"none\",\n            \"fill-rule\": \"evenodd\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 109\n            },\n            __self: this\n          }, React.createElement(\"g\", {\n            id: \"Page-1\",\n            transform: \"translate(-354.000000, -684.000000)\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 110\n            },\n            __self: this\n          }, React.createElement(\"g\", {\n            id: \"products\",\n            transform: \"translate(132.000000, 660.000000)\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111\n            },\n            __self: this\n          }, React.createElement(\"g\", {\n            id: \"line-1\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 112\n            },\n            __self: this\n          }, React.createElement(\"g\", {\n            id: \"product-card\",\n            transform: \"translate(0.000000, 12.000000)\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 113\n            },\n            __self: this\n          }, React.createElement(\"g\", {\n            id: \"icon\",\n            transform: \"translate(222.000000, 12.000000)\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114\n            },\n            __self: this\n          }, React.createElement(\"circle\", {\n            id: \"circle\",\n            fill: \"url(#radialGradient-1)\",\n            cx: \"21\",\n            cy: \"21\",\n            r: \"21\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 115\n            },\n            __self: this\n          }), React.createElement(\"path\", {\n            d: \"M29.9946924,29.1076172 L28.8822001,15.5306936 C28.8580225,15.225303 28.594495,14.9894436 28.277518,14.9894436 L25.2452125,14.9894436 L25.2452125,13.9296875 C25.2452125,12.3142578 23.8849203,11 22.2129071,11 L19.7870627,11 C18.1150494,11 16.7547572,12.3142578 16.7547572,13.9296875 L16.7547572,14.9894436 L13.7224518,14.9894436 C13.4054748,14.9894436 13.1419472,15.225303 13.1177696,15.5306936 L12.0053178,29.1073828 C11.9665447,29.5939844 12.1411651,30.0784375 12.4843816,30.4365234 C12.8275982,30.7946094 13.3141821,31 13.8193238,31 L28.1806055,31 C28.6857472,31 29.1722907,30.7946484 29.5155477,30.4365625 C29.8588046,30.0784766 30.033425,29.5940234 29.9946924,29.1076172 Z M18,14.25 C18,13.00935 18.80748,12 19.8,12 L22.2,12 C23.19252,12 24,13.00935 24,14.25 L24,15 L18,15 L18,14.25 Z\",\n            id: \"bag\",\n            fill: \"#FFFFFF\",\n            \"fill-rule\": \"nonzero\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 116\n            },\n            __self: this\n          })))))))), React.createElement(\"div\", {\n            className: \"grid__item__overlay__cost\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 124\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"grid__item__overlay__cost__number\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125\n            },\n            __self: this\n          }, item.cost), React.createElement(\"div\", {\n            className: \"grid__item__overlay__cost__coin\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: \"../static/img/coin.svg\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 127\n            },\n            __self: this\n          }))), React.createElement(\"div\", {\n            onClick: function onClick() {\n              return _this3.props.action(points - item.cost);\n            },\n            className: \"grid__item__overlay__button\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130\n            },\n            __self: this\n          }, \"Redeem now\")), React.createElement(\"div\", {\n            className: \"grid__item__image\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 132\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: item.img.url,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 133\n            },\n            __self: this\n          })), React.createElement(\"div\", {\n            className: \"grid__item__data\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 135\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"grid__item__data__cat\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 136\n            },\n            __self: this\n          }, item.category), React.createElement(\"div\", {\n            className: \"grid__item__data__name\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 137\n            },\n            __self: this\n          }, item.name)));\n        } else {\n          return React.createElement(\"div\", {\n            className: \"grid__item grid__item--unaffordable\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 144\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"grid__item__overlay\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 145\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"grid__item__overlay__info\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 146\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"grid__item__overlay__info__text\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 147\n            },\n            __self: this\n          }, \"You need \", -(points - item.cost)), React.createElement(\"div\", {\n            className: \"grid__item__overlay__info__coin\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 148\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: \"../static/img/coin.svg\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 148\n            },\n            __self: this\n          })))), React.createElement(\"div\", {\n            className: \"grid__item__image\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 152\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: item.img.url,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 153\n            },\n            __self: this\n          })), React.createElement(\"div\", {\n            className: \"grid__item__data\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 155\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"grid__item__data__cat\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }, item.category), React.createElement(\"div\", {\n            className: \"grid__item__data__name\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 157\n            },\n            __self: this\n          }, item.name)));\n        }\n      }, this)));\n    }\n  }]);\n\n  return Products;\n}(Component);\n\nexport default Products;","map":{"version":3,"sources":["/Users/gonzalofernan/dev/challenge/components/Products.js"],"names":["React","Component","Header","Link","Products","props","sortMostRecent","bind","sortLowestCost","sortHighestCost","state","isTop","loading","isLowestPrice","isHigherPrice","isProductsOriginal","fetch","headers","Headers","Authorization","response","json","data","setState","document","addEventListener","window","scrollY","products","newProducts","sort","a","b","_id","localeCompare","console","log","cost","points","redeem","value","map","item","index","action","img","url","category","name"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Header from '../components/Header'\nimport Link from 'next/link'\n\nclass Products extends Component {\n  constructor (props) {\n    super(props)\n    this.sortMostRecent = this.sortMostRecent.bind(this);\n    this.sortLowestCost = this.sortLowestCost.bind(this);\n    this.sortHighestCost = this.sortHighestCost.bind(this);\n    this.state = {\n     isTop: true,\n     loading: true,\n     isLowestPrice: false,\n     isHigherPrice: false,\n     isProductsOriginal: false,\n     'products': [],\n    }\n  }\n\n  async componentDidMount() {\n    const response = await fetch('https://coding-challenge-api.aerolab.co/products', {\n         headers: new Headers({\n         Authorization: \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZDFkMmY4NzM2ZjEyNTAwNmZmOWIzZTAiLCJpYXQiOjE1NjIxOTM3OTl9.QaUDZ3qJA5FMwz0ThhGWoIxJ8pFpZv9I00XZM40PORc\",\n      })\n    })\n    const data = await response.json();\n    this.setState({ 'products': data, loading: false });\n    // Detect when scrolled through banner\n    document.addEventListener('scroll', () => {\n      const isTop = window.scrollY < 400;\n      if (isTop !== this.state.isTop) {\n          this.setState({ isTop })\n      }\n    });\n \n\n  };\n //Sort products from most recent creation date\n sortMostRecent () {\n  const {products} = this.state\n  let newProducts = products\n  if (! this.state.isLowestPrice) {\n    newProducts = products.sort((a, b) => a._id.localeCompare(b._id))\n  }\n  this.setState({\n    products: newProducts\n  });\n  console.log(products);\n};\n\n  //Sort products from lowest cost to highest\n  sortLowestCost () {\n    const {products} = this.state\n    let newProducts = products\n    if (! this.state.isLowestPrice) {\n      newProducts = products.sort((a, b) => a.cost - b.cost)\n    }\n    this.setState({\n      products: newProducts\n    });\n    console.log(products);\n  };\n  \n  //Sort products from highest cost to lowest\n  sortHighestCost () {\n    const {products} = this.state\n    let newProducts = products\n    if (! this.state.isLowestPrice) {\n      newProducts = products.sort((a, b) => b.cost - a.cost)\n    }\n    this.setState({\n      products: newProducts\n    });\n    console.log(products);\n  };\n  \n  render () {\n      //Redeem\n    var points = this.props.points\n    function redeem(value) {\n      if (points > value){\n        points = points - value;\n      }\n    }\n    return (\n      <div style=\"position :relative;\">\n          <div className={\"sortbar\" + ' ' +(this.state.isTop ? 'normal' : 'fixed')}>\n          <div className=\"sortbar__title\">Sort by:</div>\n          <div className=\"sortbar__buttons\">\n            <div onClick={this.sortMostRecent} className=\"sortbar__buttons__button\">Most recent</div>\n            <div onClick={this.sortLowestCost} className=\"sortbar__buttons__button\">Lowest price</div>\n            <div onClick={this.sortHighestCost} className=\"sortbar__buttons__button\">Highest price</div>\n          </div>\n      </div>\n      <div className=\"grid\">\n        {this.state.products.map(function(item, index) {\n          if (item.cost <= points){\n            return(\n              <div className=\"grid__item\">\n                <div className=\"grid__item__overlay\">\n                <svg width=\"42px\" height=\"42px\" viewBox=\"0 0 42 42\" version=\"1.1\">\n                    <defs>\n                        <radialGradient cx=\"50%\" cy=\"50.8764901%\" fx=\"50%\" fy=\"50.8764901%\" r=\"79.8469947%\" id=\"radialGradient-1\">\n                            <stop stop-color=\"#0AD4FA\" offset=\"0%\"></stop>\n                            <stop stop-color=\"#25BBF1\" offset=\"100%\"></stop>\n                        </radialGradient>\n                    </defs>\n                    <g id=\"Catalog\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                        <g id=\"Page-1\" transform=\"translate(-354.000000, -684.000000)\">\n                            <g id=\"products\" transform=\"translate(132.000000, 660.000000)\">\n                                <g id=\"line-1\">\n                                    <g id=\"product-card\" transform=\"translate(0.000000, 12.000000)\">\n                                        <g id=\"icon\" transform=\"translate(222.000000, 12.000000)\">\n                                            <circle id=\"circle\" fill=\"url(#radialGradient-1)\" cx=\"21\" cy=\"21\" r=\"21\"></circle>\n                                            <path d=\"M29.9946924,29.1076172 L28.8822001,15.5306936 C28.8580225,15.225303 28.594495,14.9894436 28.277518,14.9894436 L25.2452125,14.9894436 L25.2452125,13.9296875 C25.2452125,12.3142578 23.8849203,11 22.2129071,11 L19.7870627,11 C18.1150494,11 16.7547572,12.3142578 16.7547572,13.9296875 L16.7547572,14.9894436 L13.7224518,14.9894436 C13.4054748,14.9894436 13.1419472,15.225303 13.1177696,15.5306936 L12.0053178,29.1073828 C11.9665447,29.5939844 12.1411651,30.0784375 12.4843816,30.4365234 C12.8275982,30.7946094 13.3141821,31 13.8193238,31 L28.1806055,31 C28.6857472,31 29.1722907,30.7946484 29.5155477,30.4365625 C29.8588046,30.0784766 30.033425,29.5940234 29.9946924,29.1076172 Z M18,14.25 C18,13.00935 18.80748,12 19.8,12 L22.2,12 C23.19252,12 24,13.00935 24,14.25 L24,15 L18,15 L18,14.25 Z\" id=\"bag\" fill=\"#FFFFFF\" fill-rule=\"nonzero\"></path>\n                                        </g>\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </svg>\n                <div className=\"grid__item__overlay__cost\">\n                  <div className=\"grid__item__overlay__cost__number\">{item.cost}</div>\n                  <div className=\"grid__item__overlay__cost__coin\">\n                    <img src=\"../static/img/coin.svg\" />\n                  </div>\n                </div>\n                <div onClick={() => this.props.action(points-item.cost)} className=\"grid__item__overlay__button\">Redeem now</div>\n                </div>\n                <div className=\"grid__item__image\">\n                  <img src={item.img.url} />\n                </div>\n                <div className=\"grid__item__data\">\n                  <div className=\"grid__item__data__cat\">{item.category}</div>\n                  <div className=\"grid__item__data__name\">{item.name}</div>\n                </div>  \n              </div>\n          )\n          }\n          else{\n            return(\n              <div className=\"grid__item grid__item--unaffordable\">\n                <div className=\"grid__item__overlay\">\n                <div className=\"grid__item__overlay__info\">\n                  <div className=\"grid__item__overlay__info__text\">You need {-(points - item.cost)}</div>\n                  <div className=\"grid__item__overlay__info__coin\"><img src=\"../static/img/coin.svg\" /></div>\n                </div>\n                \n                </div>\n                <div className=\"grid__item__image\">\n                  <img src={item.img.url} />\n                </div>\n                <div className=\"grid__item__data\">\n                  <div className=\"grid__item__data__cat\">{item.category}</div>\n                  <div className=\"grid__item__data__name\">{item.name}</div>\n                </div>  \n              </div>\n          )\n          }\n          \n        }, this)}\n      </div>\n      </div>\n    )\n  }\n}\n\nexport default Products\n"]},"metadata":{},"sourceType":"module"}