{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/gonzalofernan/dev/challenge/components/Products.js\";\nimport React, { Component } from 'react';\nimport LazyLoad from 'react-lazy-load';\nimport Header from '../components/Header';\nimport ImageLoader from '../components/ImageLoader';\nimport Link from 'next/link'; //onClick={() => this.props.action(points-item.cost)}\n\nvar Products =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Products, _Component);\n\n  function Products(props) {\n    var _this;\n\n    _classCallCheck(this, Products);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Products).call(this, props));\n    _this.sortMostRecent = _this.sortMostRecent.bind(_assertThisInitialized(_this));\n    _this.sortLowestCost = _this.sortLowestCost.bind(_assertThisInitialized(_this));\n    _this.sortHighestCost = _this.sortHighestCost.bind(_assertThisInitialized(_this));\n    _this.state = {\n      isTop: true,\n      loading: true,\n      isLowestPrice: false,\n      isHigherPrice: false,\n      isProductsOriginal: false,\n      'products': []\n    };\n    return _this;\n  }\n\n  _createClass(Products, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var response, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch('https://coding-challenge-api.aerolab.co/products', {\n                  headers: new Headers({\n                    Authorization: \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZDFkMmY4NzM2ZjEyNTAwNmZmOWIzZTAiLCJpYXQiOjE1NjIxOTM3OTl9.QaUDZ3qJA5FMwz0ThhGWoIxJ8pFpZv9I00XZM40PORc\"\n                  })\n                });\n\n              case 2:\n                response = _context.sent;\n                _context.next = 5;\n                return response.json();\n\n              case 5:\n                data = _context.sent;\n                this.setState({\n                  'products': data,\n                  loading: false\n                }); // Detect when scrolled through banner\n\n                document.addEventListener('scroll', function () {\n                  var isTop = window.scrollY < 400;\n\n                  if (isTop !== _this2.state.isTop) {\n                    _this2.setState({\n                      isTop: isTop\n                    });\n                  }\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"sortMostRecent\",\n    //Sort products from most recent creation date\n    value: function sortMostRecent() {\n      var products = this.state.products;\n      var newProducts = products;\n\n      if (!this.state.isLowestPrice) {\n        newProducts = products.sort(function (a, b) {\n          return a._id.localeCompare(b._id);\n        });\n      }\n\n      this.setState({\n        products: newProducts\n      });\n      console.log(products);\n    }\n  }, {\n    key: \"sortLowestCost\",\n    //Sort products from lowest cost to highest\n    value: function sortLowestCost() {\n      var products = this.state.products;\n      var newProducts = products;\n\n      if (!this.state.isLowestPrice) {\n        newProducts = products.sort(function (a, b) {\n          return a.cost - b.cost;\n        });\n      }\n\n      this.setState({\n        products: newProducts\n      });\n      console.log(products);\n    }\n  }, {\n    key: \"sortHighestCost\",\n    //Sort products from highest cost to lowest\n    value: function sortHighestCost() {\n      var products = this.state.products;\n      var newProducts = products;\n\n      if (!this.state.isLowestPrice) {\n        newProducts = products.sort(function (a, b) {\n          return b.cost - a.cost;\n        });\n      }\n\n      this.setState({\n        products: newProducts\n      });\n      console.log(products);\n    }\n  }, {\n    key: \"showLabel\",\n    //revealLabel\n    value: function showLabel(name, cost) {\n      document.getElementById('label').classList.add('label--show');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      //Redeem\n      var points = this.props.points;\n\n      function redeem(value) {\n        if (points > value) {\n          points = points - value;\n        }\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"label\",\n        className: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"label__left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"label__left__text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"You are about to redeem \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"iPhone 8\"), \" for \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"8000\")), React.createElement(\"div\", {\n        className: \"label__left__image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"../static/img/coin.svg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"label__right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"label__right__cancel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Cancel\"), React.createElement(\"div\", {\n        className: \"label__right__redeem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Redeem now\"))), React.createElement(\"div\", {\n        className: \"sortbar\" + ' ' + \"sortbar--\" + (this.state.isTop ? 'normal' : 'fixed'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sortbar__title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Sort by:\"), React.createElement(\"div\", {\n        className: \"sortbar__buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: this.sortMostRecent,\n        className: \"sortbar__buttons__button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Most recent\"), React.createElement(\"div\", {\n        onClick: this.sortLowestCost,\n        className: \"sortbar__buttons__button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Lowest price\"), React.createElement(\"div\", {\n        onClick: this.sortHighestCost,\n        className: \"sortbar__buttons__button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Highest price\"))), React.createElement(\"div\", {\n        className: \"grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, this.state.products.map(function (item, index) {\n        var _this3 = this;\n\n        if (this.state.loading) {\n          React.createElement(\"h1\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117\n            },\n            __self: this\n          }, \"Loading...\");\n        } else {\n          if (item.cost <= points) {\n            return React.createElement(\"div\", {\n              className: \"grid__item\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 122\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"grid__item__overlay\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 123\n              },\n              __self: this\n            }, React.createElement(\"svg\", {\n              width: \"42px\",\n              height: \"42px\",\n              viewBox: \"0 0 42 42\",\n              version: \"1.1\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 124\n              },\n              __self: this\n            }, React.createElement(\"defs\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 125\n              },\n              __self: this\n            }, React.createElement(\"radialGradient\", {\n              cx: \"50%\",\n              cy: \"50.8764901%\",\n              fx: \"50%\",\n              fy: \"50.8764901%\",\n              r: \"79.8469947%\",\n              id: \"radialGradient-1\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 126\n              },\n              __self: this\n            }, React.createElement(\"stop\", {\n              \"stop-color\": \"#0AD4FA\",\n              offset: \"0%\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 127\n              },\n              __self: this\n            }), React.createElement(\"stop\", {\n              \"stop-color\": \"#25BBF1\",\n              offset: \"100%\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 128\n              },\n              __self: this\n            }))), React.createElement(\"g\", {\n              id: \"Catalog\",\n              stroke: \"none\",\n              \"stroke-width\": \"1\",\n              fill: \"none\",\n              \"fill-rule\": \"evenodd\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 131\n              },\n              __self: this\n            }, React.createElement(\"g\", {\n              id: \"Page-1\",\n              transform: \"translate(-354.000000, -684.000000)\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 132\n              },\n              __self: this\n            }, React.createElement(\"g\", {\n              id: \"products\",\n              transform: \"translate(132.000000, 660.000000)\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 133\n              },\n              __self: this\n            }, React.createElement(\"g\", {\n              id: \"line-1\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 134\n              },\n              __self: this\n            }, React.createElement(\"g\", {\n              id: \"product-card\",\n              transform: \"translate(0.000000, 12.000000)\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 135\n              },\n              __self: this\n            }, React.createElement(\"g\", {\n              id: \"icon\",\n              transform: \"translate(222.000000, 12.000000)\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 136\n              },\n              __self: this\n            }, React.createElement(\"circle\", {\n              id: \"circle\",\n              fill: \"url(#radialGradient-1)\",\n              cx: \"21\",\n              cy: \"21\",\n              r: \"21\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 137\n              },\n              __self: this\n            }), React.createElement(\"path\", {\n              d: \"M29.9946924,29.1076172 L28.8822001,15.5306936 C28.8580225,15.225303 28.594495,14.9894436 28.277518,14.9894436 L25.2452125,14.9894436 L25.2452125,13.9296875 C25.2452125,12.3142578 23.8849203,11 22.2129071,11 L19.7870627,11 C18.1150494,11 16.7547572,12.3142578 16.7547572,13.9296875 L16.7547572,14.9894436 L13.7224518,14.9894436 C13.4054748,14.9894436 13.1419472,15.225303 13.1177696,15.5306936 L12.0053178,29.1073828 C11.9665447,29.5939844 12.1411651,30.0784375 12.4843816,30.4365234 C12.8275982,30.7946094 13.3141821,31 13.8193238,31 L28.1806055,31 C28.6857472,31 29.1722907,30.7946484 29.5155477,30.4365625 C29.8588046,30.0784766 30.033425,29.5940234 29.9946924,29.1076172 Z M18,14.25 C18,13.00935 18.80748,12 19.8,12 L22.2,12 C23.19252,12 24,13.00935 24,14.25 L24,15 L18,15 L18,14.25 Z\",\n              id: \"bag\",\n              fill: \"#FFFFFF\",\n              \"fill-rule\": \"nonzero\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 138\n              },\n              __self: this\n            })))))))), React.createElement(\"div\", {\n              className: \"grid__item__overlay__cost\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 146\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"grid__item__overlay__cost__number\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 147\n              },\n              __self: this\n            }, item.cost), React.createElement(\"div\", {\n              className: \"grid__item__overlay__cost__coin\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 148\n              },\n              __self: this\n            }, React.createElement(\"img\", {\n              src: \"../static/img/coin.svg\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 149\n              },\n              __self: this\n            }))), React.createElement(\"div\", {\n              onClick: function onClick() {\n                return _this3.props.showLabel(12, 12);\n              },\n              className: \"grid__item__overlay__button\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 152\n              },\n              __self: this\n            }, \"Redeem prize\")), React.createElement(\"div\", {\n              className: \"grid__item__image\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 154\n              },\n              __self: this\n            }, React.createElement(LazyLoad, {\n              debounce: false,\n              offsetVertical: 500,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 155\n              },\n              __self: this\n            }, React.createElement(\"img\", {\n              src: item.img.url,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 158\n              },\n              __self: this\n            }))), React.createElement(\"div\", {\n              className: \"grid__item__data\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 160\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"grid__item__data__cat\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 161\n              },\n              __self: this\n            }, item.category), React.createElement(\"div\", {\n              className: \"grid__item__data__name\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 162\n              },\n              __self: this\n            }, item.name)));\n          } else {\n            return React.createElement(\"div\", {\n              className: \"grid__item grid__item--unaffordable\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 169\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"grid__item__overlay\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 170\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"grid__item__overlay__info\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 171\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"grid__item__overlay__info__text\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 172\n              },\n              __self: this\n            }, \"You need \", -(points - item.cost)), React.createElement(\"div\", {\n              className: \"grid__item__overlay__info__coin\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 173\n              },\n              __self: this\n            }, React.createElement(\"img\", {\n              src: \"../static/img/coin.svg\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 173\n              },\n              __self: this\n            })))), React.createElement(\"div\", {\n              className: \"grid__item__image\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 177\n              },\n              __self: this\n            }, React.createElement(\"img\", {\n              src: item.img.url,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 178\n              },\n              __self: this\n            })), React.createElement(\"div\", {\n              className: \"grid__item__data\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 180\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"grid__item__data__cat\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 181\n              },\n              __self: this\n            }, item.category), React.createElement(\"div\", {\n              className: \"grid__item__data__name\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 182\n              },\n              __self: this\n            }, item.name)));\n          }\n        }\n      }, this)), React.createElement(\"p\", {\n        className: \"grid__message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Showing \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, this.state.products.length), \" awesome products\"));\n    }\n  }]);\n\n  return Products;\n}(Component);\n\nexport default Products;","map":{"version":3,"sources":["/Users/gonzalofernan/dev/challenge/components/Products.js"],"names":["React","Component","LazyLoad","Header","ImageLoader","Link","Products","props","sortMostRecent","bind","sortLowestCost","sortHighestCost","state","isTop","loading","isLowestPrice","isHigherPrice","isProductsOriginal","fetch","headers","Headers","Authorization","response","json","data","setState","document","addEventListener","window","scrollY","products","newProducts","sort","a","b","_id","localeCompare","console","log","cost","name","getElementById","classList","add","points","redeem","value","map","item","index","showLabel","img","url","category","length"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,iBAArB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,IAAP,MAAiB,WAAjB,C,CACA;;IACMC,Q;;;;;AACJ,oBAAaC,KAAb,EAAoB;AAAA;;AAAA;;AAClB,kFAAMA,KAAN;AACA,UAAKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBC,IAApB,+BAAtB;AACA,UAAKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBD,IAApB,+BAAtB;AACA,UAAKE,eAAL,GAAuB,MAAKA,eAAL,CAAqBF,IAArB,+BAAvB;AACA,UAAKG,KAAL,GAAa;AACZC,MAAAA,KAAK,EAAE,IADK;AAEZC,MAAAA,OAAO,EAAE,IAFG;AAGZC,MAAAA,aAAa,EAAE,KAHH;AAIZC,MAAAA,aAAa,EAAE,KAJH;AAKZC,MAAAA,kBAAkB,EAAE,KALR;AAMZ,kBAAY;AANA,KAAb;AALkB;AAanB;;;;;;;;;;;;;;;;uBAGwBC,KAAK,CAAC,kDAAD,EAAqD;AAC5EC,kBAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACrBC,oBAAAA,aAAa,EAAE;AADM,mBAAZ;AADmE,iBAArD,C;;;AAAtBC,gBAAAA,Q;;uBAKaA,QAAQ,CAACC,IAAT,E;;;AAAbC,gBAAAA,I;AACN,qBAAKC,QAAL,CAAc;AAAE,8BAAYD,IAAd;AAAoBV,kBAAAA,OAAO,EAAE;AAA7B,iBAAd,E,CACA;;AACAY,gBAAAA,QAAQ,CAACC,gBAAT,CAA0B,QAA1B,EAAoC,YAAM;AACxC,sBAAMd,KAAK,GAAGe,MAAM,CAACC,OAAP,GAAiB,GAA/B;;AACA,sBAAIhB,KAAK,KAAK,MAAI,CAACD,KAAL,CAAWC,KAAzB,EAAgC;AAC5B,oBAAA,MAAI,CAACY,QAAL,CAAc;AAAEZ,sBAAAA,KAAK,EAALA;AAAF,qBAAd;AACH;AACF,iBALD;;;;;;;;;;;;;;;;;;AASH;qCACkB;AAAA,UACViB,QADU,GACE,KAAKlB,KADP,CACVkB,QADU;AAEjB,UAAIC,WAAW,GAAGD,QAAlB;;AACA,UAAI,CAAE,KAAKlB,KAAL,CAAWG,aAAjB,EAAgC;AAC9BgB,QAAAA,WAAW,GAAGD,QAAQ,CAACE,IAAT,CAAc,UAACC,CAAD,EAAIC,CAAJ;AAAA,iBAAUD,CAAC,CAACE,GAAF,CAAMC,aAAN,CAAoBF,CAAC,CAACC,GAAtB,CAAV;AAAA,SAAd,CAAd;AACD;;AACD,WAAKV,QAAL,CAAc;AACZK,QAAAA,QAAQ,EAAEC;AADE,OAAd;AAGAM,MAAAA,OAAO,CAACC,GAAR,CAAYR,QAAZ;AACD;;;AAEC;qCACkB;AAAA,UACTA,QADS,GACG,KAAKlB,KADR,CACTkB,QADS;AAEhB,UAAIC,WAAW,GAAGD,QAAlB;;AACA,UAAI,CAAE,KAAKlB,KAAL,CAAWG,aAAjB,EAAgC;AAC9BgB,QAAAA,WAAW,GAAGD,QAAQ,CAACE,IAAT,CAAc,UAACC,CAAD,EAAIC,CAAJ;AAAA,iBAAUD,CAAC,CAACM,IAAF,GAASL,CAAC,CAACK,IAArB;AAAA,SAAd,CAAd;AACD;;AACD,WAAKd,QAAL,CAAc;AACZK,QAAAA,QAAQ,EAAEC;AADE,OAAd;AAGAM,MAAAA,OAAO,CAACC,GAAR,CAAYR,QAAZ;AACD;;;AAED;sCACmB;AAAA,UACVA,QADU,GACE,KAAKlB,KADP,CACVkB,QADU;AAEjB,UAAIC,WAAW,GAAGD,QAAlB;;AACA,UAAI,CAAE,KAAKlB,KAAL,CAAWG,aAAjB,EAAgC;AAC9BgB,QAAAA,WAAW,GAAGD,QAAQ,CAACE,IAAT,CAAc,UAACC,CAAD,EAAIC,CAAJ;AAAA,iBAAUA,CAAC,CAACK,IAAF,GAASN,CAAC,CAACM,IAArB;AAAA,SAAd,CAAd;AACD;;AACD,WAAKd,QAAL,CAAc;AACZK,QAAAA,QAAQ,EAAEC;AADE,OAAd;AAGAM,MAAAA,OAAO,CAACC,GAAR,CAAYR,QAAZ;AACD;;;AACD;8BACWU,I,EAAMD,I,EAAM;AACrBb,MAAAA,QAAQ,CAACe,cAAT,CAAwB,OAAxB,EAAiCC,SAAjC,CAA2CC,GAA3C,CAA+C,aAA/C;AACD;;;6BAES;AACN;AACF,UAAIC,MAAM,GAAG,KAAKrC,KAAL,CAAWqC,MAAxB;;AACA,eAASC,MAAT,CAAgBC,KAAhB,EAAuB;AACrB,YAAIF,MAAM,GAAGE,KAAb,EAAmB;AACjBF,UAAAA,MAAM,GAAGA,MAAM,GAAGE,KAAlB;AACD;AACF;;AACD,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,EAAE,EAAC,OAAR;AAAgB,QAAA,SAAS,EAAC,OAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAA2D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA3D,WAAqF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAArF,CADF,EAEE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,GAAG,EAAC,wBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAFF,CADF,EAOE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF,CAPF,CADJ,EAaI;AAAK,QAAA,SAAS,EAAE,YAAY,GAAZ,GAAiB,WAAjB,IAA8B,KAAKlC,KAAL,CAAWC,KAAX,GAAmB,QAAnB,GAA8B,OAA5D,CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,EAEA;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,OAAO,EAAE,KAAKL,cAAnB;AAAmC,QAAA,SAAS,EAAC,0BAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAEE;AAAK,QAAA,OAAO,EAAE,KAAKE,cAAnB;AAAmC,QAAA,SAAS,EAAC,0BAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,EAGE;AAAK,QAAA,OAAO,EAAE,KAAKC,eAAnB;AAAoC,QAAA,SAAS,EAAC,0BAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAHF,CAFA,CAbJ,EAqBA;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKC,KAAL,CAAWkB,QAAX,CAAoBiB,GAApB,CAAwB,UAASC,IAAT,EAAeC,KAAf,EAAsB;AAAA;;AAC7C,YAAI,KAAKrC,KAAL,CAAWE,OAAf,EAAuB;AACrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACD,SAFD,MAGK;AACH,cAAIkC,IAAI,CAACT,IAAL,IAAaK,MAAjB,EAAwB;AACtB,mBACE;AAAK,cAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAK,cAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACA;AAAK,cAAA,KAAK,EAAC,MAAX;AAAkB,cAAA,MAAM,EAAC,MAAzB;AAAgC,cAAA,OAAO,EAAC,WAAxC;AAAoD,cAAA,OAAO,EAAC,KAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACI;AAAgB,cAAA,EAAE,EAAC,KAAnB;AAAyB,cAAA,EAAE,EAAC,aAA5B;AAA0C,cAAA,EAAE,EAAC,KAA7C;AAAmD,cAAA,EAAE,EAAC,aAAtD;AAAoE,cAAA,CAAC,EAAC,aAAtE;AAAoF,cAAA,EAAE,EAAC,kBAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACI;AAAM,4BAAW,SAAjB;AAA2B,cAAA,MAAM,EAAC,IAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAEI;AAAM,4BAAW,SAAjB;AAA2B,cAAA,MAAM,EAAC,MAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,CADJ,CADJ,EAOI;AAAG,cAAA,EAAE,EAAC,SAAN;AAAgB,cAAA,MAAM,EAAC,MAAvB;AAA8B,8BAAa,GAA3C;AAA+C,cAAA,IAAI,EAAC,MAApD;AAA2D,2BAAU,SAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACI;AAAG,cAAA,EAAE,EAAC,QAAN;AAAe,cAAA,SAAS,EAAC,qCAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACI;AAAG,cAAA,EAAE,EAAC,UAAN;AAAiB,cAAA,SAAS,EAAC,mCAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACI;AAAG,cAAA,EAAE,EAAC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACI;AAAG,cAAA,EAAE,EAAC,cAAN;AAAqB,cAAA,SAAS,EAAC,gCAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACI;AAAG,cAAA,EAAE,EAAC,MAAN;AAAa,cAAA,SAAS,EAAC,kCAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACI;AAAQ,cAAA,EAAE,EAAC,QAAX;AAAoB,cAAA,IAAI,EAAC,wBAAzB;AAAkD,cAAA,EAAE,EAAC,IAArD;AAA0D,cAAA,EAAE,EAAC,IAA7D;AAAkE,cAAA,CAAC,EAAC,IAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAEI;AAAM,cAAA,CAAC,EAAC,qxBAAR;AAA8xB,cAAA,EAAE,EAAC,KAAjyB;AAAuyB,cAAA,IAAI,EAAC,SAA5yB;AAAszB,2BAAU,SAAh0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,CADJ,CADJ,CADJ,CADJ,CADJ,CAPJ,CADA,EAuBA;AAAK,cAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAK,cAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAoDI,IAAI,CAACT,IAAzD,CADF,EAEE;AAAK,cAAA,SAAS,EAAC,iCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAK,cAAA,GAAG,EAAC,wBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAFF,CAvBA,EA6BA;AAAK,cAAA,OAAO,EAAE;AAAA,uBAAM,MAAI,CAAChC,KAAL,CAAW2C,SAAX,CAAqB,EAArB,EAAyB,EAAzB,CAAN;AAAA,eAAd;AAAkD,cAAA,SAAS,EAAC,6BAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BA7BA,CADF,EAgCE;AAAK,cAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACA,oBAAC,QAAD;AACA,cAAA,QAAQ,EAAE,KADV;AAEA,cAAA,cAAc,EAAE,GAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAGC;AAAK,cAAA,GAAG,EAAEF,IAAI,CAACG,GAAL,CAASC,GAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHD,CADA,CAhCF,EAsCE;AAAK,cAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAK,cAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAwCJ,IAAI,CAACK,QAA7C,CADF,EAEE;AAAK,cAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAyCL,IAAI,CAACR,IAA9C,CAFF,CAtCF,CADF;AA6CD,WA9CD,MA+CI;AACF,mBACE;AAAK,cAAA,SAAS,EAAC,qCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAK,cAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACA;AAAK,cAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAK,cAAA,SAAS,EAAC,iCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAA2D,EAAEI,MAAM,GAAGI,IAAI,CAACT,IAAhB,CAA3D,CADF,EAEE;AAAK,cAAA,SAAS,EAAC,iCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAiD;AAAK,cAAA,GAAG,EAAC,wBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAjD,CAFF,CADA,CADF,EAQE;AAAK,cAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAK,cAAA,GAAG,EAAES,IAAI,CAACG,GAAL,CAASC,GAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CARF,EAWE;AAAK,cAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACE;AAAK,cAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAwCJ,IAAI,CAACK,QAA7C,CADF,EAEE;AAAK,cAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAyCL,IAAI,CAACR,IAA9C,CAFF,CAXF,CADF;AAkBD;AACF;AAGF,OA3EA,EA2EE,IA3EF,CADH,CArBA,EAmGE;AAAG,QAAA,SAAS,EAAC,eAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAO,KAAK5B,KAAL,CAAWkB,QAAX,CAAoBwB,MAA3B,CAArC,sBAnGF,CADF;AAuGD;;;;EA5LoBrD,S;;AA+LvB,eAAeK,QAAf","sourcesContent":["import React, { Component } from 'react'\nimport LazyLoad from 'react-lazy-load';\nimport Header from '../components/Header'\nimport ImageLoader from '../components/ImageLoader'\nimport Link from 'next/link'\n//onClick={() => this.props.action(points-item.cost)}\nclass Products extends Component {\n  constructor (props) {\n    super(props)\n    this.sortMostRecent = this.sortMostRecent.bind(this);\n    this.sortLowestCost = this.sortLowestCost.bind(this);\n    this.sortHighestCost = this.sortHighestCost.bind(this);\n    this.state = {\n     isTop: true,\n     loading: true,\n     isLowestPrice: false,\n     isHigherPrice: false,\n     isProductsOriginal: false,\n     'products': [],\n    }\n  }\n\n  async componentDidMount() {\n    const response = await fetch('https://coding-challenge-api.aerolab.co/products', {\n         headers: new Headers({\n         Authorization: \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZDFkMmY4NzM2ZjEyNTAwNmZmOWIzZTAiLCJpYXQiOjE1NjIxOTM3OTl9.QaUDZ3qJA5FMwz0ThhGWoIxJ8pFpZv9I00XZM40PORc\",\n      })\n    })\n    const data = await response.json();\n    this.setState({ 'products': data, loading: false });\n    // Detect when scrolled through banner\n    document.addEventListener('scroll', () => {\n      const isTop = window.scrollY < 400;\n      if (isTop !== this.state.isTop) {\n          this.setState({ isTop })\n      }\n    });\n \n\n  };\n //Sort products from most recent creation date\n sortMostRecent () {\n  const {products} = this.state\n  let newProducts = products\n  if (! this.state.isLowestPrice) {\n    newProducts = products.sort((a, b) => a._id.localeCompare(b._id))\n  }\n  this.setState({\n    products: newProducts\n  });\n  console.log(products);\n};\n\n  //Sort products from lowest cost to highest\n  sortLowestCost () {\n    const {products} = this.state\n    let newProducts = products\n    if (! this.state.isLowestPrice) {\n      newProducts = products.sort((a, b) => a.cost - b.cost)\n    }\n    this.setState({\n      products: newProducts\n    });\n    console.log(products);\n  };\n  \n  //Sort products from highest cost to lowest\n  sortHighestCost () {\n    const {products} = this.state\n    let newProducts = products\n    if (! this.state.isLowestPrice) {\n      newProducts = products.sort((a, b) => b.cost - a.cost)\n    }\n    this.setState({\n      products: newProducts\n    });\n    console.log(products);\n  };\n  //revealLabel\n  showLabel (name, cost) {\n    document.getElementById('label').classList.add('label--show');\n  }\n  \n  render () {\n      //Redeem\n    var points = this.props.points\n    function redeem(value) {\n      if (points > value){\n        points = points - value;\n      }\n    }\n    return (\n      <div>\n          <div id=\"label\" className=\"label\">\n            <div className=\"label__left\">\n              <div className=\"label__left__text\">You are about to redeem <span>iPhone 8</span> for <span>8000</span></div> \n              <div className=\"label__left__image\">\n                <img src=\"../static/img/coin.svg\" />\n              </div> \n            </div>\n            <div className=\"label__right\">\n              <div className=\"label__right__cancel\">Cancel</div>\n              <div className=\"label__right__redeem\">Redeem now</div>\n            </div>\n          </div>\n          <div className={\"sortbar\" + ' ' +\"sortbar--\"+(this.state.isTop ? 'normal' : 'fixed')}>\n          <div className=\"sortbar__title\">Sort by:</div>\n          <div className=\"sortbar__buttons\">\n            <div onClick={this.sortMostRecent} className=\"sortbar__buttons__button\">Most recent</div>\n            <div onClick={this.sortLowestCost} className=\"sortbar__buttons__button\">Lowest price</div>\n            <div onClick={this.sortHighestCost} className=\"sortbar__buttons__button\">Highest price</div>\n          </div>\n      </div>\n      <div className=\"grid\">\n        {this.state.products.map(function(item, index) {\n          if (this.state.loading){\n            <h1>Loading...</h1>\n          }\n          else {\n            if (item.cost <= points){\n              return(\n                <div className=\"grid__item\">\n                  <div className=\"grid__item__overlay\">\n                  <svg width=\"42px\" height=\"42px\" viewBox=\"0 0 42 42\" version=\"1.1\">\n                      <defs>\n                          <radialGradient cx=\"50%\" cy=\"50.8764901%\" fx=\"50%\" fy=\"50.8764901%\" r=\"79.8469947%\" id=\"radialGradient-1\">\n                              <stop stop-color=\"#0AD4FA\" offset=\"0%\"></stop>\n                              <stop stop-color=\"#25BBF1\" offset=\"100%\"></stop>\n                          </radialGradient>\n                      </defs>\n                      <g id=\"Catalog\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                          <g id=\"Page-1\" transform=\"translate(-354.000000, -684.000000)\">\n                              <g id=\"products\" transform=\"translate(132.000000, 660.000000)\">\n                                  <g id=\"line-1\">\n                                      <g id=\"product-card\" transform=\"translate(0.000000, 12.000000)\">\n                                          <g id=\"icon\" transform=\"translate(222.000000, 12.000000)\">\n                                              <circle id=\"circle\" fill=\"url(#radialGradient-1)\" cx=\"21\" cy=\"21\" r=\"21\"></circle>\n                                              <path d=\"M29.9946924,29.1076172 L28.8822001,15.5306936 C28.8580225,15.225303 28.594495,14.9894436 28.277518,14.9894436 L25.2452125,14.9894436 L25.2452125,13.9296875 C25.2452125,12.3142578 23.8849203,11 22.2129071,11 L19.7870627,11 C18.1150494,11 16.7547572,12.3142578 16.7547572,13.9296875 L16.7547572,14.9894436 L13.7224518,14.9894436 C13.4054748,14.9894436 13.1419472,15.225303 13.1177696,15.5306936 L12.0053178,29.1073828 C11.9665447,29.5939844 12.1411651,30.0784375 12.4843816,30.4365234 C12.8275982,30.7946094 13.3141821,31 13.8193238,31 L28.1806055,31 C28.6857472,31 29.1722907,30.7946484 29.5155477,30.4365625 C29.8588046,30.0784766 30.033425,29.5940234 29.9946924,29.1076172 Z M18,14.25 C18,13.00935 18.80748,12 19.8,12 L22.2,12 C23.19252,12 24,13.00935 24,14.25 L24,15 L18,15 L18,14.25 Z\" id=\"bag\" fill=\"#FFFFFF\" fill-rule=\"nonzero\"></path>\n                                          </g>\n                                      </g>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                  </svg>\n                  <div className=\"grid__item__overlay__cost\">\n                    <div className=\"grid__item__overlay__cost__number\">{item.cost}</div>\n                    <div className=\"grid__item__overlay__cost__coin\">\n                      <img src=\"../static/img/coin.svg\" />\n                    </div>\n                  </div>\n                  <div onClick={() => this.props.showLabel(12, 12)} className=\"grid__item__overlay__button\">Redeem prize</div>\n                  </div>\n                  <div className=\"grid__item__image\">\n                  <LazyLoad\n                  debounce={false}\n                  offsetVertical={500}\n                  ><img src={item.img.url} /></LazyLoad>\n                  </div>\n                  <div className=\"grid__item__data\">\n                    <div className=\"grid__item__data__cat\">{item.category}</div>\n                    <div className=\"grid__item__data__name\">{item.name}</div>\n                  </div>  \n                </div>\n            )\n            }\n            else{\n              return(\n                <div className=\"grid__item grid__item--unaffordable\">\n                  <div className=\"grid__item__overlay\">\n                  <div className=\"grid__item__overlay__info\">\n                    <div className=\"grid__item__overlay__info__text\">You need {-(points - item.cost)}</div>\n                    <div className=\"grid__item__overlay__info__coin\"><img src=\"../static/img/coin.svg\" /></div>\n                  </div>\n                  \n                  </div>\n                  <div className=\"grid__item__image\">\n                    <img src={item.img.url} />\n                  </div>\n                  <div className=\"grid__item__data\">\n                    <div className=\"grid__item__data__cat\">{item.category}</div>\n                    <div className=\"grid__item__data__name\">{item.name}</div>\n                  </div>  \n                </div>\n            )\n            }\n          }\n          \n          \n        }, this)}\n      </div>\n        <p className=\"grid__message\">Showing <span>{this.state.products.length}</span> awesome products</p>\n      </div>\n    )\n  }\n}\n\nexport default Products\n"]},"metadata":{},"sourceType":"module"}